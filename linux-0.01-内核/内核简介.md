# Linux内核
==================================================================================================
## Linux0.01内核简介
---------------------------
    在linux0.01内核基础上，还不能运行大多数的GNU软件，但是Linux0.01（以下称v0.01）具备了一个现代操作系统的所有基本要素。
    由于v0.01简单而精致，并且具有完整的源代码，因此是学习内核的最好教材。
### Linux0.01内核背景
----------------------------
    v0.01还不成熟，所以只支持最基本的硬件设备（硬盘、显示器、键盘、串口）
    @Intel 386以上CPU
    @VGA/EGA显示器
    @标准IDE接口硬盘
    @标准键盘
    键盘布局为芬兰格式（Linus是芬兰人），可以对kernel/keyboard.s进行修改来改变键盘布局。
## Linux核心代码目录
---------------------------
linux核心代码分布在几个子目录中，包括5900行左右的ANSI C源代码、2500行左右的C头文件代码和1450行左右的Intel80386汇编代码。
`目录名         所属文件`
 `boot          核心引导代码`
 `fs            文件系统`
 `include       头文件`
 `init          init进程--linux系统中执行的第一个进程`
 `Kernel        系统调用`
 `lib           库代码`
 `mm            内存管理`
 `tools         内核引导文件的制作工具`
### boot目录
-------------------------
1.boot.s文件介绍
  `v0.01中boot.s文件是计算机的BIOS在加电时自动执行的。加电时boot.s被BIOS程序加载到物理地址0x7c00处然后boot.s将自身移动到物理地址
0x90000处，接着boot.s程序本身跳转到这个地址执行。`
  `boot.s使用BIOS功能在屏幕上打印“\nLoading system...巴拉巴拉\n\n”，接着从BIOS设置的系统引导设备中读取核心映像到物理地址0x10000，
然后关闭引导设备（若是软驱，则先关闭软驱），保存光标位置，关闭中断，再将系统核心从软驱0x10000拷贝到软驱0x0000处。`
  `接下来正确的中断描述符表（IDT）和全局描述符表（GDT）地址被装入合适的80386寄存器（IDT、GDT数据被作为静态数据存放在核心映像文件中），
然后打开需要的中断。`
  `系统引导代码不要大于512字节。`
2.head.s文件介绍
  `head.s包括了32位系统的初始化代码，系统初始化代码在物理地址0x00000000执行，此地址也是系统分页目录存放地址，因此系统初始化后，初始化
代码将被覆盖。`
  `head.s是被boot.s调用执行，当head.s被执行时启动设备的马达已经关闭，代码执行的物理地址是0x00000000（也是存储管理系统的页表存放地址）
程序执行在32位保护模式下，这时一个适合的IDT、GDT被设置.`
 ` 因为0x00000000被覆盖，因此在系统启动的最后阶段将执行一个jump语句，跳转到页表最后的第一个地址，这个地址就是核心中的-main()函数入口。`
